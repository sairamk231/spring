1. SPRING JDBC OVERVIEW
=======================

1.1 Definition:
Spring JDBC is a module of the Spring Framework that simplifies database access using JDBC by eliminating boilerplate code such as connection handling, statement creation, and exception handling.

1.2 Why Spring JDBC:
Reduces boilerplate JDBC code
Automatic resource management
Unified exception handling
Easy integration with Spring Boot
Better than plain JDBC, lighter than ORM

1.3 Spring JDBC vs JDBC:
| JDBC                       | Spring JDBC        |
| -------------------------- | ------------------ |
| Manual connection handling | Automatic          |
| Checked exceptions         | Runtime exceptions |
| More boilerplate           | Minimal code       |
| Error-prone                | Clean & safe       |


2. SPRING JDBC ARCHITECTURE
============================

2.1 Core Components:
DataSource ‚Äì DB connection
JdbcTemplate ‚Äì Core helper class
RowMapper ‚Äì Maps ResultSet to object
Transaction Manager

2.2 Spring JDBC Flow:
Controller calls Service
Service calls DAO
DAO uses JdbcTemplate
JdbcTemplate interacts with DB
Result returned as object/list

3. JdbcTemplate (CORE CLASS)
==============================

3.1 Definition:
JdbcTemplate is the central class in Spring JDBC that handles:
Connection opening/closing
Statement creation
ResultSet processing
Exception translation

3.2 JdbcTemplate Configuration:
application.properties:
spring.datasource.url=jdbc:mysql://localhost:3306/testdb
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver


üìå In Spring Boot, JdbcTemplate is auto-configured.

3.3 Injecting JdbcTemplate:
@Autowired
private JdbcTemplate jdbcTemplate;

4. INSERT OPERATION
====================

4.1 Example:
@Repository
public class EmployeeDao {

    @Autowired
    private JdbcTemplate jdbcTemplate;

    public int saveEmployee() {
        String sql = "INSERT INTO employee(name, salary) VALUES (?, ?)";
        return jdbcTemplate.update(sql, "Sai", 50000);
    }
}

Explanation:

update() used for INSERT/UPDATE/DELETE

? prevents SQL Injection

Output:
1 row inserted

5. UPDATE OPERATION
====================

5.1 Example:
public int updateEmployee() {
    String sql = "UPDATE employee SET salary=? WHERE name=?";
    return jdbcTemplate.update(sql, 60000, "Sai");
}

Output:
1 row updated

6. DELETE OPERATION
====================

6.1 Example:
public int deleteEmployee() {
    String sql = "DELETE FROM employee WHERE name=?";
    return jdbcTemplate.update(sql, "Sai");
}

Output:
1 row deleted

7. SELECT OPERATIONS
=====================

7.1 Query for Single Value:
public int getCount() {
    String sql = "SELECT COUNT(*) FROM employee";
    return jdbcTemplate.queryForObject(sql, Integer.class);
}

Output:
10

7.2 Query for Single Row:
public Employee getEmployee(int id) {
    String sql = "SELECT * FROM employee WHERE id=?";
    return jdbcTemplate.queryForObject(sql, new EmployeeRowMapper(), id);
}

7.3 RowMapper:
Definition:
Maps ResultSet ‚Üí Java Object.

public class EmployeeRowMapper implements RowMapper<Employee> {

    public Employee mapRow(ResultSet rs, int rowNum) throws SQLException {
        Employee emp = new Employee();
        emp.setId(rs.getInt("id"));
        emp.setName(rs.getString("name"));
        emp.setSalary(rs.getInt("salary"));
        return emp;
    }
}

Output:
Employee{id=1, name='Sai', salary=50000}

7.4 Query for Multiple Rows:
public List<Employee> getAllEmployees() {
    String sql = "SELECT * FROM employee";
    return jdbcTemplate.query(sql, new EmployeeRowMapper());
}

Output:
List of Employee objects

8. NAMED PARAMETER JDBC TEMPLATE
=================================

8.1 Definition:
NamedParameterJdbcTemplate allows named parameters instead of ?.

8.2 Example:
@Autowired
private NamedParameterJdbcTemplate namedJdbcTemplate;

public int saveEmployee(Employee emp) {
    String sql = "INSERT INTO employee(name, salary) VALUES (:name, :salary)";
    Map<String, Object> map = new HashMap<>();
    map.put("name", emp.getName());
    map.put("salary", emp.getSalary());
    return namedJdbcTemplate.update(sql, map);
}

Output:
1 row inserted

Key Points:
Better readability
Useful for complex queries

9. BATCH OPERATIONS
====================
9.1 Definition:

Used to execute multiple SQL statements at once.

9.2 Example:
public int[] batchInsert(List<Employee> list) {
    String sql = "INSERT INTO employee(name, salary) VALUES (?, ?)";
    return jdbcTemplate.batchUpdate(sql, list, list.size(),
        (ps, emp) -> {
            ps.setString(1, emp.getName());
            ps.setInt(2, emp.getSalary());
        });
}

Output:
[1, 1, 1]

10. TRANSACTION MANAGEMENT
============================

10.1 @Transactional with Spring JDBC:
@Service
@Transactional
public class EmployeeService {
    public void saveData() {
        dao.saveEmployee();
        dao.updateEmployee();
    }
}

Explanation:
Commit on success
Rollback on RuntimeException

11. EXCEPTION HANDLING
=======================

11.1 DataAccessException:
Definition:
Spring JDBC converts SQL exceptions into unchecked exceptions.

Examples:
DuplicateKeyException
BadSqlGrammarException

üìå Common across JDBC & ORM.

12. SPRING JDBC vs SPRING ORM
===============================
| Spring JDBC    | Spring ORM            |
| -------------- | --------------------- |
| SQL based      | Object based          |
| Faster         | Slight overhead       |
| More control   | Less control          |
| Simple queries | Complex domain models |

13. REAL-TIME BEST PRACTICES

==============================

‚úî Use Spring JDBC for simple CRUD
‚úî Use ORM for complex relationships
‚úî Always use prepared statements
‚úî Prefer batch updates
‚úî Handle transactions at service layer
‚úî Avoid business logic in DAO

14. MOST ASKED INTERVIEW QUESTIONS
===================================

14.1 What is JdbcTemplate?
Core helper class that simplifies JDBC operations.

14.2 Difference between query() and queryForObject()?
query() ‚Üí multiple rows
queryForObject() ‚Üí single row/value

14.3 Is Spring JDBC thread-safe?
Yes, JdbcTemplate is thread-safe.

14.4 Can Spring JDBC work without Spring Boot?
‚úÖ Yes

15. TRICKY INTERVIEW QUESTIONS
===============================
| Question                            | Answer                           |
| ----------------------------------- | -------------------------------- |
| Does JdbcTemplate close connection? | ‚úÖ Yes                            |
| Can we use multiple DataSources?    | ‚úÖ Yes                            |
| Is RowMapper mandatory?             | ‚ùå (BeanPropertyRowMapper exists) |
| Is JdbcTemplate singleton?          | ‚úÖ Yes                            |
| Does @Transactional work with JDBC? | ‚úÖ Yes                            |
| Which is faster: JDBC or ORM?       | JDBC                             |
